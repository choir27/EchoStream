(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90],{8340:function(e,s,l){Promise.resolve().then(l.bind(l,7571))},7571:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return p}});var n=l(7437),t=l(2265),a=l(4627),r=l(7937),i=l(9787),d=l(1154),o=l(6463),c=l(357);async function h(e,s,l){try{let n={playlistName:e,playlistSongs:s.playlistSongs,userID:l.$id,user:l.email};await d.Z.updateDocument(c.env.NEXT_PUBLIC_PLAYLIST_DATABASE_ID,c.env.NEXT_PUBLIC_PLAYLIST_COLLECTION_ID,s.$id,n),window.location.reload()}catch(e){console.error(e)}}async function u(e,s,l){try{let n=s.playlistSongs.map(e=>e),t=n.find(s=>JSON.parse(s).$id===e);n.splice(n.indexOf(t),1);let a={playlistName:s.playlistName,playlistSongs:n,userID:l.$id,user:l.email};await d.Z.updateDocument(c.env.NEXT_PUBLIC_PLAYLIST_DATABASE_ID,c.env.NEXT_PUBLIC_PLAYLIST_COLLECTION_ID,s.$id,a),window.location.reload()}catch(e){console.error(e)}}async function x(e,s){try{await d.Z.deleteDocument(c.env.NEXT_PUBLIC_PLAYLIST_DATABASE_ID,c.env.NEXT_PUBLIC_PLAYLIST_COLLECTION_ID,e.$id),localStorage.setItem("playlist",""),s("/")}catch(e){console.error(e)}}function f(e){let s=(0,a.o)(e=>e.listOfSongs),l=(0,t.useContext)(r.S),[d,c]=(0,t.useState)(!1),[f,j]=(0,t.useState)(""),m=s.find(s=>s.$id===e.id),v=new Date(null==m?void 0:m.$updatedAt),{push:p}=(0,o.useRouter)(),N=null==m?void 0:m.playlistSongs.map(e=>{let s=JSON.parse(e);return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:s.name}),(0,n.jsx)("td",{children:s.artist}),(0,n.jsx)("td",{children:s.genre}),(0,n.jsx)("td",{children:s.user}),(0,n.jsx)("td",{children:(0,i.z)({text:"",className:"fa-solid fa-xmark button small",onClick:e=>{e.preventDefault(),u(s.$id,m,l)}})})]},s.$id)});return(0,n.jsxs)("div",{id:"tableContainer",children:[(0,n.jsx)("section",{children:d?(0,n.jsxs)("form",{className:"flex spaceEvenly",children:[(0,n.jsx)("h2",{children:"Edit Playlist Name"}),(0,n.jsx)("input",{type:"text",onChange:e=>j(e.target.value)}),(0,i.z)({text:"",className:"fa-solid fa-pen-to-square button",onClick:e=>{e.preventDefault(),h(f,m,l)}}),(0,i.z)({text:"",className:"fa-solid fa-right-from-bracket button",onClick:e=>{e.preventDefault(),c(!1)}})]}):(0,n.jsxs)("div",{className:"flex spaceEvenly",children:[(0,n.jsxs)("h2",{children:["Playlist Name: ",null==m?void 0:m.playlistName]}),(0,i.z)({text:"",className:"fa-regular fa-pen-to-square button",onClick:e=>{e.preventDefault(),c(!0)}}),(0,i.z)({text:"",className:"fa-solid fa-trash-can button",onClick:e=>{e.preventDefault(),x(m,p)}})]})}),(0,n.jsxs)("h3",{children:["Updated At: ",v.getMonth()+1,"/",v.getDate(),"/",v.getFullYear()]}),(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Song Name"}),(0,n.jsx)("th",{children:"Artist"}),(0,n.jsx)("th",{children:"Genre"}),(0,n.jsx)("th",{children:"User"}),(0,n.jsx)("th",{children:"Remove"})]})}),(0,n.jsx)("tbody",{children:N})]})]})}l(7330),l(3813);var j=l(3650),m=l(2674),v=l(1956);function p(e){let s=e.params,l=(0,a.o)(e=>e.searchDisplay),r=(0,a.o)(e=>e.setSearchDisplay);return(0,t.useEffect)(()=>{r(!1)},[]),(0,n.jsx)(n.Fragment,{children:l?(0,n.jsx)(v.default,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j.Z,{}),(0,n.jsx)("section",{className:"main",id:"home",children:(0,n.jsxs)("section",{children:[(0,n.jsx)("h1",{children:"Edit Playlist"}),(0,n.jsx)(f,{id:s.id})]})}),(0,n.jsx)(m.Z,{})]})})}},1956:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return h}});var n=l(7437);l(7330),l(3813);var t=l(4627),a=l(4573),r=l(9787),i=l(3650),d=l(2674),o=l(5688),c=l(2646);function h(){let e=(0,t.o)(e=>e.searchResults),s=(0,a.Z)("auth"),l=e.map((e,l)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.name?e.name:e.playlistName}),(0,n.jsx)("td",{children:e.audio?(0,n.jsx)("button",{className:"button small",onClick:s=>{s.preventDefault(),localStorage.setItem("song",e.$id),window.location.reload()},children:"Play"}):""}),(0,n.jsx)("td",{}),(0,n.jsx)("td",{children:e.user}),(0,n.jsx)("td",{children:e.audio?(0,n.jsx)(o.Z,{index:l}):"  "}),(0,n.jsx)("td",{children:(null==s?void 0:s.toLowerCase())===e.user&&e.audio?(0,r.z)({text:"",className:"fa-solid fa-trash button small",onClick:s=>(0,c.at)(e.$id,e.cloudinaryId)}):""})]},"".concat(e.$id,"-").concat(e.name)));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Z,{}),(0,n.jsx)("section",{id:"home",className:"main",children:(0,n.jsxs)("div",{id:"tableContainer",children:[(0,n.jsx)("h2",{children:"Search Results"}),e.length?(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Play"}),(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:s?"":"User"}),(0,n.jsx)("th",{children:"Playlist"}),(0,n.jsx)("th",{children:"Delete"})]})}),(0,n.jsx)("tbody",{children:l})]}):(0,n.jsx)("h2",{children:"No Results Match Your Search"})]})}),(0,n.jsx)(d.Z,{})]})}},2674:function(e,s,l){"use strict";l.d(s,{Z:function(){return t}});var n=l(7437);function t(){return(0,n.jsx)("footer",{className:"flex",children:(0,n.jsxs)("nav",{className:"flex",children:[(0,n.jsxs)("ul",{className:"flex icons",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://twitter.com/choir241",className:"fa-brands fa-twitter",children:(0,n.jsx)("p",{className:"hidden",children:"Twitter"})})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://www.linkedin.com/in/richard-choir/",className:"fa-brands fa-linkedin",children:(0,n.jsx)("p",{className:"hidden",children:"LinkedIn"})})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://www.instagram.com/225kh_drw/?hl=en",className:"fa-brands fa-instagram",children:(0,n.jsx)("p",{className:"hidden",children:"Instagram"})})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://github.com/choir27",className:"fa-brands fa-github",children:(0,n.jsx)("p",{className:"hidden",children:"Github"})})})]}),(0,n.jsx)("small",{children:"EchoVerse \xa9 2023. All rights are reserved"})]})})}l(2265)},3650:function(e,s,l){"use strict";l.d(s,{Z:function(){return u}});var n=l(7437),t=l(7138),a=l(1154),r=l(9787),i=l(4627),d=l(23);function o(){let e=(0,i.o)(e=>e.searchValue),s=(0,i.o)(e=>e.setSearchValue),l=(0,i.o)(e=>e.setSearchResults),t=(0,i.o)(e=>e.song),a=(0,i.o)(e=>e.listOfSongs),o=(0,i.o)(e=>e.setSearchDisplay);return(0,n.jsxs)("form",{children:[(0,n.jsx)("input",{type:"search",onChange:e=>s(e.target.value)}),(0,n.jsx)(r.z,{text:"",className:"fa-solid fa-magnifying-glass button",onClick:s=>{s.preventDefault(),function(){let s=[];t.forEach(l=>{var n,t,a;((null==l?void 0:null===(n=l.audio)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null==l?void 0:null===(t=l.name)||void 0===t?void 0:t.toLowerCase().includes(e.toLowerCase()))||(null==l?void 0:null===(a=l.user)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase())))&&s.push(l)}),a.forEach(l=>{var n,t;((null==l?void 0:null===(n=l.playlistName)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null==l?void 0:null===(t=l.user)||void 0===t?void 0:t.toLowerCase().includes(e.toLowerCase())))&&s.push(l),l.playlistSongs.forEach(n=>{var t,a,r;let i=JSON.parse(n);((null==i?void 0:null===(t=i.audio)||void 0===t?void 0:t.toLowerCase().includes(e.toLowerCase()))||(null==i?void 0:null===(a=i.name)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase()))||(null==i?void 0:null===(r=i.user)||void 0===r?void 0:r.toLowerCase().includes(e.toLowerCase())))&&s.push(l)})}),s.length||(console.log("No Results Match Your Search"),d.Am.error("No Results Match Your Search")),l(s),o(!0)}()}})]})}var c=l(6463),h=l(4573);function u(){async function e(e){try{e.preventDefault(),sessionStorage.removeItem("auth"),await a.Z.deleteCurrentSession(),window.location.reload(),(0,c.redirect)("/")}catch(e){console.error(e)}}let s=(0,i.o)(e=>e.setHeaderDisplay),l=(0,i.o)(e=>e.headerDisplay),d=(0,h.Z)("auth");return(0,n.jsxs)("header",{className:"flex column",id:"header",children:[(0,n.jsx)("div",{children:(0,n.jsx)(t.default,{href:"/",children:(0,n.jsx)("h1",{children:"EchoStream"})})}),(0,r.z)({text:"",className:"".concat("display"===l?"fa-solid fa-xmark button small hidden":"fa-solid fa-bars button small hidden"),id:"menu",onClick:()=>void("display"===l?s("hidden"):s("display"))}),(0,n.jsx)("nav",{className:"flex column nav ".concat(l),children:(0,n.jsxs)("ul",{className:"flex navBar",children:[(0,n.jsx)("li",{children:(0,n.jsx)(t.default,{href:"/",children:"Home"})}),(0,n.jsx)("li",{children:(0,n.jsx)(t.default,{href:"/about",children:"About"})}),d?(0,n.jsx)("li",{children:(0,n.jsx)(t.default,{href:"/account",children:"Account"})}):"",d?(0,n.jsx)("li",{children:(0,n.jsx)(t.default,{href:"/addAudio",children:"Add Audio"})}):"",d?(0,n.jsx)("li",{children:(0,n.jsx)(t.default,{href:"/",onClick:s=>e(s),children:"Logout"})}):"",d?"":(0,n.jsx)("li",{children:(0,n.jsx)(t.default,{href:"/demo",children:"Demo"})}),d?"":(0,n.jsx)("li",{children:(0,n.jsx)(t.default,{href:"/login",children:"Login/Register"})}),(0,n.jsx)("li",{children:(0,n.jsx)(o,{})})]})})]})}},7330:function(){},3813:function(){}},function(e){e.O(0,[543,884,429,646,971,23,744],function(){return e(e.s=8340)}),_N_E=e.O()}]);