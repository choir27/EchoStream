(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{3381:function(e,s,t){Promise.resolve().then(t.bind(t,2687))},2687:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(7437),n=t(2265);t(8574);var l=t(2943),r=t(7598),o=t(8676),i=t(6908),c=t(7614),d=t(9211);function u(){let[e,s]=(0,n.useState)(""),[t,l]=(0,n.useState)(""),[r,o]=(0,n.useState)(""),[u,h]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),f=(0,n.useContext)(d.S);async function g(){try{let s=await c.Z.updateAccountEmail(e,r);s&&window.location.reload()}catch(e){console.error(e)}}async function j(){try{let e=await c.Z.updateAccountPassword(u,r);e&&window.location.reload()}catch(e){console.error(e)}}async function p(){try{let e=await c.Z.updateAccountName(t);e&&window.location.reload()}catch(e){console.error(e)}}let w=(0,a.jsxs)("section",{className:"flex column",children:[(0,i.z)({text:"Change Name",onClick:e=>x("name"),className:"button small"}),(0,i.z)({text:"Change Email",onClick:e=>x("email"),className:"button small"}),(0,i.z)({text:"Change Password",onClick:e=>x("password"),className:"button small"})]}),C={name:(0,a.jsxs)("section",{className:"flex column alignItems",children:[(0,a.jsx)("input",{type:"text",name:"name",placeholder:null==f?void 0:f.name,id:"name",onChange:e=>l(e.target.value)}),(0,i.z)({text:"Change Name",onClick:e=>p(),className:"button small"}),(0,i.z)({text:"Go Back",onClick:e=>x(""),className:"button small"})]}),email:(0,a.jsxs)("section",{className:"flex column alignItems",children:[(0,a.jsx)("input",{type:"text",placeholder:null==f?void 0:f.email,name:"email",id:"email",onChange:e=>s(e.target.value)}),(0,a.jsx)("input",{type:"password",placeholder:"Input Password",name:"password",id:"password",onChange:e=>o(e.target.value)}),(0,i.z)({text:"Change Email",onClick:e=>g(),className:"button small"}),(0,i.z)({text:"Go Back",onClick:e=>x(""),className:"button small"})]}),password:(0,a.jsxs)("section",{className:"flex column alignItems",children:[(0,a.jsx)("input",{placeholder:"Current Password",type:"password",name:"password",id:"password",onChange:e=>o(e.target.value)}),(0,a.jsx)("input",{placeholder:"New Password",type:"password",name:"newPassword",id:"newPassword",onChange:e=>h(e.target.value)}),(0,i.z)({text:"Change Password",onClick:e=>j(),className:"button small"}),(0,i.z)({text:"Go Back",onClick:e=>x(""),className:"button small"})]})};return m?C[m]:w}var h=t(108),m=t(2580),x=()=>{let e=(0,n.useContext)(d.S),[s,t]=(0,n.useState)(1),i=(0,h.o)(e=>e.listOfSongs),c=(0,h.o)(e=>e.songDisplay),x=(0,h.o)(e=>e.setSongDisplay),f=(0,h.o)(e=>e.song);return(0,a.jsxs)("main",{className:"column flex",children:[(0,a.jsx)(l.default,{}),(0,a.jsxs)("section",{id:"account",className:"main",children:[(0,a.jsxs)("h1",{children:["Welcome ",null==e?void 0:e.name]}),(0,a.jsx)(r.Z,{}),(0,a.jsxs)("section",{className:"flex alignItems spaceEvenly",children:[(0,a.jsx)(u,{}),(0,a.jsx)(m.Z,{playlist:i,setSongDisplay:e=>x(e),songDisplay:c,songs:f,currentPage:s,setCurrentPage:e=>t(e)})]})]}),(0,a.jsx)(o.Z,{})]})}},8676:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(7437);function n(){return(0,a.jsx)("footer",{className:"flex",children:(0,a.jsxs)("nav",{className:"flex",children:[(0,a.jsxs)("ul",{className:"flex icons",children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://twitter.com/choir241",className:"fa-brands fa-twitter",children:(0,a.jsx)("p",{className:"hidden",children:"Twitter"})})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://www.linkedin.com/in/richard-choir/",className:"fa-brands fa-linkedin",children:(0,a.jsx)("p",{className:"hidden",children:"LinkedIn"})})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://www.instagram.com/225kh_drw/?hl=en",className:"fa-brands fa-instagram",children:(0,a.jsx)("p",{className:"hidden",children:"Instagram"})})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://github.com/choir27",className:"fa-brands fa-github",children:(0,a.jsx)("p",{className:"hidden",children:"Github"})})})]}),(0,a.jsx)("small",{children:"EchoVerse \xa9 2023. All rights are reserved"})]})})}t(2265)},2943:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var a=t(7437),n=t(1396),l=t.n(n),r=t(7614),o=t(108);function i(){let e=(0,o.o)(e=>e.searchValue),s=(0,o.o)(e=>e.setSearchValue),t=(0,o.o)(e=>e.setSearchResults),n=(0,o.o)(e=>e.song),r=(0,o.o)(e=>e.listOfSongs);return(0,a.jsxs)("form",{children:[(0,a.jsx)("input",{type:"search",onChange:e=>s(e.target.value)}),(0,a.jsx)(l(),{href:"/search",className:"fa-solid fa-magnifying-glass",onClick:()=>{!function(){let s=[];n.forEach(t=>{(t.audio.toLowerCase().includes(e.toLowerCase())||t.name.toLowerCase().includes(e.toLowerCase())||t.user.toLowerCase().includes(e.toLowerCase()))&&s.push(t)}),r.forEach(t=>{(t.playlistName.toLowerCase().includes(e.toLowerCase())||t.user.toLowerCase().includes(e.toLowerCase()))&&s.push(t),t.playlistSongs.forEach(a=>{let n=JSON.parse(a);(n.audio.toLowerCase().includes(e.toLowerCase())||n.name.toLowerCase().includes(e.toLowerCase())||n.user.toLowerCase().includes(e.toLowerCase()))&&s.push(t)})}),t(s)}()}})]})}var c=t(4033),d=t(70);function u(){async function e(e){try{e.preventDefault(),sessionStorage.removeItem("auth"),await r.Z.deleteCurrentSession(),window.location.reload(),(0,c.redirect)("/")}catch(e){console.error(e)}}let s=(0,d.Z)("auth");return(0,a.jsxs)("header",{className:"flex column",children:[(0,a.jsx)("div",{children:(0,a.jsx)(l(),{href:"/",children:(0,a.jsx)("h1",{children:"EchoStream"})})}),(0,a.jsx)("nav",{className:"flex column",children:(0,a.jsxs)("ul",{className:"flex navBar",children:[(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/",children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/about",children:"About"})}),s?(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/account",children:"Account"})}):"",s?(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/addAudio",children:"Add Audio"})}):"",s?(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/",onClick:s=>e(s),children:"Logout"})}):"",s?"":(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/demo",children:"Demo"})}),s?"":(0,a.jsx)("li",{children:(0,a.jsx)(l(),{href:"/login",children:"Login/Register"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i,{})})]})})]})}},7598:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(7437),n=t(2265),l=t(9485);t(9234);var r=t(108),o=t(6908);function i(){return(0,o.z)({text:"Shuffle",className:"button small",onClick:e=>(function(){let e=localStorage.getItem("playlist"),s=JSON.parse(e),t=s.song,a=t.length,n;for(;a>0;)n=Math.floor(Math.random()*a),a--,[t[a],t[n]]=[t[n],t[a]];localStorage.setItem("playlist",JSON.stringify({id:s.id,song:t})),window.location.reload()})()})}function c(){let[e,s]=(0,n.useState)(!1),[t,o]=(0,n.useState)(0),[c,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(""),m=(0,r.o)(e=>e.song);(0,n.useEffect)(()=>{try{if(m.length&&!localStorage.getItem("playlist")){let e=localStorage.getItem("song"),s=JSON.parse(e),t=m.filter(e=>e.audio===s[0]);d(t),h(s)}else if(localStorage.getItem("playlist")){let e=[],s=localStorage.getItem("playlist"),t=JSON.parse(s),a=new Map(m.map(e=>[e.audio,e]));t.song.forEach(s=>{let t=a.get(s);t&&e.push(t)}),d(e),h(t.song)}}catch(e){console.error(e)}},[m]);let x=()=>{o(e=>e<u.length-1?e+1:0),s(!0)};return(0,a.jsxs)("section",{id:"player",children:[(0,a.jsx)("section",{children:(0,a.jsxs)("section",{className:"playerInfo",children:[(0,a.jsx)("h3",{children:"Currently Playing Song"}),(0,a.jsx)("h2",{children:c[t]?c[t].name:"No music has been added"}),(0,a.jsx)(i,{})]})}),u.length>0&&(0,a.jsx)(l.Z,{autoPlay:e,onEnded:x,showSkipControls:!0,showJumpControls:!1,src:u[t],onClickPrevious:()=>{o(e=>0===e?u.length-1:e-1),s(!0)},onClickNext:x,timeFormat:"auto"},t)]})}},2580:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(7437),n=t(9184),l=t(6908);function r(e){let s=(e.currentPage-1)*4,t=e.playlist.map(e=>{let s=e.playlistSongs.map(e=>{let s=JSON.parse(e);return s.audio});return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.playlistName}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{className:"button small",onClick:t=>{t.preventDefault(),localStorage.setItem("playlist",JSON.stringify({id:e.$id,song:s})),window.location.reload()},children:"Play"})}),(0,a.jsx)("td",{children:(0,l.Z)({text:"Edit",className:"button",domain:"/editPlaylist/".concat(e.$id)})})]},e.$id)});return(0,a.jsxs)("section",{children:[(0,l.z)({className:"button",text:"Song",onClick:s=>{s.preventDefault(),e.setSongDisplay(!1)}}),(0,l.z)({className:"button",text:"Playlist",onClick:s=>{s.preventDefault(),e.setSongDisplay(!0)}}),e.songDisplay?(0,a.jsxs)("div",{id:"tableContainer",children:[(0,a.jsx)("h2",{children:"Playlists"}),(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Name"}),(0,a.jsx)("th",{children:"Play"}),(0,a.jsx)("th",{children:"Edit"})]})}),(0,a.jsx)("tbody",{children:t})]})]}):(0,a.jsx)(n.ZP,{songs:e.songs,check:!0,startIndex:s,endIndex:s+4,currentPage:e.currentPage,setCurrentPage:s=>e.setCurrentPage(s),rowsPerPage:4})]})}},8574:function(){}},function(e){e.O(0,[195,173,89,184,971,472,744],function(){return e(e.s=3381)}),_N_E=e.O()}]);