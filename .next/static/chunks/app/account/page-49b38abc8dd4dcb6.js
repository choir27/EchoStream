(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{3381:function(e,t,s){Promise.resolve().then(s.bind(s,7582))},7614:function(e,t,s){"use strict";var n=s(7332),a=s(2601);let l={sdk:null,provider:()=>{if(l.sdk)return l.sdk;let e=new n.KU;e.setEndpoint("https://cloud.appwrite.io/v1").setProject("64a0712c1618df1be9a2");let t=new n.mR(e),s=new n.Lg(e),a=new n.KU(e),r=new n.Ke(e);return l.sdk={database:s,account:t,client:a,storage:r},l.sdk},createAccount:(e,t,s)=>l.provider().account.create("unique()",e,t,s),updateAccountName:e=>l.provider().account.updateName(e),updateAccountPassword:(e,t)=>l.provider().account.updatePassword(e,t),updateAccountEmail:(e,t)=>l.provider().account.updateEmail(e,t),getAccount:()=>l.provider().account.get(),createSession:(e,t)=>l.provider().account.createEmailSession(e,t),deleteCurrentSession:()=>l.provider().account.deleteSession("current"),deleteSessions:()=>l.provider().account.deleteSessions(),createDocument:(e,t,s,n)=>l.provider().database.createDocument(e,t,"unique()",s,n),listDocuments:(e,t)=>l.provider().database.listDocuments(e,t),updateDocument:(e,t,s,n)=>l.provider().database.updateDocument(e,t,s,n),deleteDocument:(e,t,s)=>l.provider().database.deleteDocument(e,t,s),uploadFile:(e,t)=>l.provider().storage.createFile(a.env.NEXT_PUBLIC_APP_SONGS,e,t),listFiles:()=>l.provider().storage.listFiles(a.env.NEXT_PUBLIC_APP_SONGS)};t.Z=l},7582:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var n=s(7437),a=s(2265),l=s(2943),r=s(1635),o=s(8676),c=s(1527),i=s(108),d=s(6908),u=s(7614);function h(){let[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)(""),[r,o]=(0,a.useState)(""),[i,h]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),f=(0,a.useContext)(c.S);async function g(){try{let t=await u.Z.updateAccountEmail(e,r);t&&window.location.reload()}catch(e){console.error(e)}}async function p(){try{let e=await u.Z.updateAccountPassword(i,r);e&&window.location.reload()}catch(e){console.error(e)}}async function j(){try{let e=await u.Z.updateAccountName(s);e&&window.location.reload()}catch(e){console.error(e)}}let y=(0,n.jsxs)("section",{className:"flex column",children:[(0,d.z)({text:"Change Name",onClick:e=>x("name"),className:"button small"}),(0,d.z)({text:"Change Email",onClick:e=>x("email"),className:"button small"}),(0,d.z)({text:"Change Password",onClick:e=>x("password"),className:"button small"})]}),w={name:(0,n.jsxs)("section",{className:"flex column alignItems",children:[(0,n.jsx)("input",{type:"text",name:"name",placeholder:null==f?void 0:f.name,id:"name",onChange:e=>l(e.target.value)}),(0,d.z)({text:"Change Name",onClick:e=>j(),className:"button small"}),(0,d.z)({text:"Go Back",onClick:e=>x(""),className:"button small"})]}),email:(0,n.jsxs)("section",{className:"flex column alignItems",children:[(0,n.jsx)("input",{type:"text",placeholder:null==f?void 0:f.email,name:"email",id:"email",onChange:e=>t(e.target.value)}),(0,n.jsx)("input",{type:"password",placeholder:"Input Password",name:"password",id:"password",onChange:e=>o(e.target.value)}),(0,d.z)({text:"Change Email",onClick:e=>g(),className:"button small"}),(0,d.z)({text:"Go Back",onClick:e=>x(""),className:"button small"})]}),password:(0,n.jsxs)("section",{className:"flex column alignItems",children:[(0,n.jsx)("input",{placeholder:"Current Password",type:"password",name:"password",id:"password",onChange:e=>o(e.target.value)}),(0,n.jsx)("input",{placeholder:"New Password",type:"password",name:"newPassword",id:"newPassword",onChange:e=>h(e.target.value)}),(0,d.z)({text:"Change Password",onClick:e=>p(),className:"button small"}),(0,d.z)({text:"Go Back",onClick:e=>x(""),className:"button small"})]})};return m?w[m]:y}s(8574);var m=s(7347);function x(e){let t=(e.currentPage-1)*4,s=e.playlist.map(e=>{let t=e.playlistSongs.map(e=>{let t=JSON.parse(e);return t.$id});return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.playlistName}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{className:"button small",onClick:e=>{e.preventDefault(),localStorage.setItem("playlist",JSON.stringify(t))},children:"Play"})}),(0,n.jsx)("td",{}),(0,n.jsx)("td",{})]},e.$id)});return(0,n.jsxs)("section",{children:[(0,d.z)({className:"button",text:"Song",onClick:t=>{t.preventDefault(),e.setSongDisplay(!1)}}),(0,d.z)({className:"button",text:"Playlist",onClick:t=>{t.preventDefault(),e.setSongDisplay(!0)}}),e.songDisplay?(0,n.jsxs)("div",{id:"tableContainer",children:[(0,n.jsx)("h2",{children:"Playlists"}),(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Play"}),(0,n.jsx)("th",{})]})}),(0,n.jsx)("tbody",{children:s})]})]}):(0,m._R)({songs:e.songs,check:!0,startIndex:t,endIndex:t+4,currentPage:e.currentPage,setCurrentPage:t=>e.setCurrentPage(t),rowsPerPage:4})]})}var f=()=>{let e=(0,a.useContext)(c.S),[t,s]=(0,a.useState)(1),d=(0,i.o)(e=>e.listOfSongs),u=(0,i.o)(e=>e.songDisplay),m=(0,i.o)(e=>e.setSongDisplay),f=(0,i.o)(e=>e.song);return(0,n.jsxs)("main",{className:"column flex",children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)("section",{id:"account",className:"main",children:[(0,n.jsxs)("h1",{children:["Welcome ",null==e?void 0:e.name]}),(0,n.jsx)(r.Z,{}),(0,n.jsxs)("section",{className:"flex alignItems spaceEvenly",children:[(0,n.jsx)(h,{}),(0,n.jsx)(x,{playlist:d,setSongDisplay:e=>m(e),songDisplay:u,songs:f,currentPage:t,setCurrentPage:e=>s(e)})]})]}),(0,n.jsx)(o.Z,{})]})}},6908:function(e,t,s){"use strict";s.d(t,{z:function(){return a}});var n=s(7437);function a(e){return(0,n.jsx)("button",{className:e.className,onClick:t=>e.onClick(t),children:e.text},e.key)}s(1396),s(2265)},8676:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(7437);function a(){return(0,n.jsx)("footer",{className:"flex",children:(0,n.jsxs)("nav",{className:"flex",children:[(0,n.jsxs)("ul",{className:"flex icons",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://twitter.com/choir241",className:"fa-brands fa-twitter",children:(0,n.jsx)("p",{className:"hidden",children:"Twitter"})})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://www.linkedin.com/in/richard-choir/",className:"fa-brands fa-linkedin",children:(0,n.jsx)("p",{className:"hidden",children:"LinkedIn"})})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://www.instagram.com/225kh_drw/?hl=en",className:"fa-brands fa-instagram",children:(0,n.jsx)("p",{className:"hidden",children:"Instagram"})})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://github.com/choir27",className:"fa-brands fa-github",children:(0,n.jsx)("p",{className:"hidden",children:"Github"})})})]}),(0,n.jsx)("small",{children:"EchoVerse \xa9 2023. All rights are reserved"})]})})}s(2265)},2943:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var n=s(7437),a=s(1396),l=s.n(a),r=s(4033),o=s(70),c=s(7614),i=s(6908),d=s(108);function u(){let e=(0,d.o)(e=>e.searchValue),t=(0,d.o)(e=>e.setSearchValue),s=(0,d.o)(e=>e.setSearchResults),a=(0,d.o)(e=>e.song),l=(0,d.o)(e=>e.listOfSongs),{push:o}=(0,r.useRouter)();return(0,n.jsxs)("form",{children:[(0,n.jsx)("input",{type:"search",onChange:e=>t(e.target.value)}),(0,n.jsx)(i.z,{text:"",className:"fa-solid fa-magnifying-glass button",onClick:t=>{t.preventDefault(),function(){let t=[];a.forEach(s=>{(s.audio.toLowerCase().includes(e.toLowerCase())||s.name.toLowerCase().includes(e.toLowerCase())||s.user.toLowerCase().includes(e.toLowerCase()))&&t.push(s)}),l.forEach(s=>{(s.playlistName.toLowerCase().includes(e.toLowerCase())||s.user.toLowerCase().includes(e.toLowerCase()))&&t.push(s),s.playlistSongs.forEach(n=>{let a=JSON.parse(n);(a.audio.toLowerCase().includes(e.toLowerCase())||a.name.toLowerCase().includes(e.toLowerCase())||a.user.toLowerCase().includes(e.toLowerCase()))&&t.push(s)})}),s(t),console.log(t),o("/search")}()}})]})}function h(){async function e(e){try{e.preventDefault(),sessionStorage.removeItem("auth"),await c.Z.deleteCurrentSession(),window.location.reload(),(0,r.redirect)("/")}catch(e){console.error(e)}}let t=(0,o.Z)("auth");return(0,n.jsxs)("header",{className:"flex column",children:[(0,n.jsx)("div",{children:(0,n.jsx)(l(),{href:"/",children:(0,n.jsx)("h1",{children:"EchoStream"})})}),(0,n.jsx)("nav",{className:"flex column",children:(0,n.jsxs)("ul",{className:"flex navBar",children:[(0,n.jsx)("li",{children:(0,n.jsx)(l(),{href:"/",children:"Home"})}),(0,n.jsx)("li",{children:(0,n.jsx)(l(),{href:"/about",children:"About"})}),t?(0,n.jsx)("li",{children:(0,n.jsx)(l(),{href:"/account",children:"Account"})}):"",t?(0,n.jsx)("li",{children:(0,n.jsx)(l(),{href:"/addAudio",children:"Add Audio"})}):"",t?(0,n.jsx)("li",{children:(0,n.jsx)(l(),{href:"/",onClick:t=>e(t),children:"Logout"})}):"",t?"":(0,n.jsx)("li",{children:(0,n.jsx)(l(),{href:"/demo",children:"Demo"})}),t?"":(0,n.jsx)("li",{children:(0,n.jsx)(l(),{href:"/login",children:"Login/Register"})}),(0,n.jsx)("li",{children:(0,n.jsx)(u,{})})]})})]})}},1635:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var n=s(7437),a=s(2265),l=s(9485);s(9234);var r=s(108);function o(){let[e,t]=(0,a.useState)(!1),[s,o]=(0,a.useState)(0),[c,i]=(0,a.useState)([]),d=(0,r.o)(e=>e.song);(0,a.useEffect)(()=>{try{if(d.length&&!localStorage.getItem("playlist")){let e=d.filter(e=>e.$id===localStorage.getItem("song"));i(e)}else{let e=[];d.forEach(t=>{var s;return(null===(s=localStorage.getItem("playlist"))||void 0===s?void 0:s.includes(t.$id))?e.push(t):""}),console.log(e),i(e)}}catch(e){console.error(e)}},[d]);let u=()=>{o(e=>e<c.length-1?e+1:0),t(!0)};return(0,n.jsxs)("section",{id:"player",children:[(0,n.jsx)("section",{children:(0,n.jsxs)("section",{className:"playerInfo",children:[(0,n.jsx)("h3",{children:"Currently Playing Song"}),(0,n.jsx)("h2",{children:c[s]?c[s].name:"No music has been added"})]})}),c.length>0&&(0,n.jsx)(l.Z,{autoPlay:e,onEnded:u,showSkipControls:!0,showJumpControls:!1,src:c[s].audio,onClickPrevious:()=>{o(e=>0===e?c.length-1:e-1),t(!0)},onClickNext:u,timeFormat:"auto"},s)]})}},7347:function(e,t,s){"use strict";s.d(t,{AX:function(){return d},_R:function(){return h},at:function(){return u}});var n=s(7437),a=s(7614);s(2265);var l=s(6908);function r(e){let t=t=>{e.setCurrentPage(t)};return(0,n.jsx)("div",{className:e.className,children:Math.ceil(e.arrayLength/e.rowsPerPage)<e.currentPage+1?Array.from({length:Math.ceil(e.arrayLength/e.rowsPerPage)},(e,s)=>(0,l.z)({onClick:e=>{t(s+1)},text:"".concat(s+1),key:"button-".concat(s),className:"button"})):Array.from({length:Math.ceil(e.arrayLength/e.rowsPerPage)},(s,a)=>a<e.currentPage-2&&0!==a?(0,n.jsx)("h1",{children:"..."},"".concat(a,"-dots")):!(a>e.currentPage+1)&&a<e.currentPage+1||a+1===Math.ceil(e.arrayLength/e.rowsPerPage)?(0,l.z)({onClick:e=>{t(a+1)},text:"".concat(a+1),key:"button-".concat(a),className:"button"}):(0,n.jsx)("h1",{children:"..."},"".concat(a,"-dots")))},"buttons")}var o=s(9476),c=s(2173),i=s(70);async function d(e){try{let t=await a.Z.listDocuments("64a071efc39bca8c4bc0","64a07cc02481a71b7da8");t.documents.length&&e(t.documents)}catch(e){console.error(e)}}async function u(e,t){try{console.log(t);let s=await c.Z.delete("https://echoverse-backend.onrender.com/deleteAudio/".concat(t)),n=await a.Z.deleteDocument("64a071efc39bca8c4bc0","64a07cc02481a71b7da8",e);n&&s&&window.location.reload()}catch(e){console.error(e)}}function h(e){let t=(0,i.Z)("auth"),s=e.songs.slice(e.startIndex,e.endIndex).map((s,a)=>e.check?s.user===(null==t?void 0:t.toLowerCase())?(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:s.name}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{className:"button small",onClick:e=>{e.preventDefault(),localStorage.setItem("song",s.$id),window.location.reload()},children:"Play"})}),(0,n.jsx)("td",{}),(0,n.jsx)("td",{}),(0,n.jsx)("td",{children:(0,n.jsx)(o.Z,{index:a})}),(0,n.jsx)("td",{children:(0,l.z)({text:"",className:"fa-solid fa-trash button small",onClick:e=>u(s.$id,s.cloudinaryId)})})]},s.$id):void 0:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:s.name}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{className:"button small",onClick:e=>{e.preventDefault(),localStorage.setItem("song",s.$id),window.location.reload()},children:"Play"})}),(0,n.jsx)("td",{}),(0,n.jsx)("td",{children:s.user}),(0,n.jsx)("td",{children:(0,n.jsx)(o.Z,{index:a})}),(0,n.jsx)("td",{children:(null==t?void 0:t.toLowerCase())===s.user?(0,l.z)({text:"",className:"fa-solid fa-trash button small",onClick:e=>u(s.$id,s.cloudinaryId)}):""})]},s.$id));return(0,n.jsx)("section",{children:(0,n.jsxs)("div",{id:"tableContainer",children:[(0,n.jsx)("h2",{children:"Song List"}),(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Play"}),(0,n.jsx)("th",{}),(0,n.jsx)("th",{children:t?"":"User"}),(0,n.jsx)("th",{children:"Playlist"}),(0,n.jsx)("th",{children:"Delete"})]})}),(0,n.jsx)("tbody",{children:s})]}),(0,n.jsx)(r,{currentPage:e.currentPage,setCurrentPage:t=>e.setCurrentPage(t),rowsPerPage:e.rowsPerPage,arrayLength:e.songs.length})]})})}},9476:function(e,t,s){"use strict";s.d(t,{u:function(){return h},Z:function(){return m}});var n=s(7437),a=s(2265),l=s(6908),r=s(7614),o=s(7332),c=s(1527),i=s(108);async function d(e,t){try{let s=e.playlistSongs.map(e=>e);s.push(JSON.stringify(t)),e.playlistSongs=s;let n=await r.Z.updateDocument("6543e6631929ba50ffd1","6543e8ebf074d567b450",e.$id,e);n&&window.location.reload()}catch(e){console.error(e)}}function u(e){let t=(0,i.o)(e=>e.listOfSongs),s=(0,i.o)(e=>e.song),l=t.map((e,t)=>(0,n.jsx)("option",{value:t,children:e.playlistName},e.$id)),[r,o]=(0,a.useState)({$id:"",playlistName:"",playlistSongs:[""],userID:"",user:""});return(0,n.jsxs)("section",{children:[(0,n.jsxs)("select",{onChange:e=>{var s,n,a,l,r;return o({$id:null===(s=t[e.target.value])||void 0===s?void 0:s.$id,playlistName:null===(n=t[e.target.value])||void 0===n?void 0:n.playlistName,playlistSongs:null===(a=t[e.target.value])||void 0===a?void 0:a.playlistSongs,userID:null===(l=t[e.target.value])||void 0===l?void 0:l.userID,user:null===(r=t[e.target.value])||void 0===r?void 0:r.user})},children:[(0,n.jsx)("option",{children:"Choose Playlist"},"0"),l]}),(0,n.jsx)("button",{className:"fa-solid fa-plus",onClick:t=>{t.preventDefault(),d(r,s[e.index])}})]})}async function h(e){try{let t=await r.Z.listDocuments("6543e6631929ba50ffd1","6543e8ebf074d567b450");e(t.documents)}catch(e){console.error(e)}}function m(e){let[t,s]=(0,a.useState)(!1),[i,d]=(0,a.useState)(""),h=(0,a.useContext)(c.S);return(0,n.jsxs)("section",{id:"playlist",children:[(0,n.jsx)("button",{className:"".concat(t?"fa-solid fa-xmark":"fa-solid fa-plus"," button"),onClick:e=>{e.preventDefault(),s(!t)}}),t?function(e,t,s,a,c){async function i(){try{let t=await r.Z.createDocument("6543e6631929ba50ffd1","6543e8ebf074d567b450",{playlistName:e,playlistSongs:[],userID:s,user:a},[o.y3.read(o.uU.any())]);t&&window.location.reload()}catch(e){console.error(e)}}return(0,n.jsxs)("form",{className:"flex column alignStart",children:[(0,n.jsxs)("div",{className:"flex alignItems justifyCenter",children:[(0,n.jsx)("input",{type:"text",onChange:e=>t(e.target.value),placeholder:"New Playlist Name"}),(0,l.z)({text:"Create Playlist",className:"",onClick:e=>{e.preventDefault(),i()}})]}),(0,n.jsx)(u,{index:c})]})}(i,e=>d(e),null==h?void 0:h.$id,null==h?void 0:h.email,e.index):""]})}},1527:function(e,t,s){"use strict";s.d(t,{S:function(){return r},Z:function(){return o}});var n=s(7437),a=s(2265),l=s(7614);let r=(0,a.createContext)();function o(e){let{children:t}=e,[s,o]=(0,a.useState)();return(0,a.useEffect)(()=>{async function e(){let e=await l.Z.getAccount();o(e)}sessionStorage.getItem("auth")&&e()},[]),(0,n.jsx)(r.Provider,{value:s,children:t})}},70:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(2265);function a(e){let[t,s]=(0,n.useState)("");return(0,n.useEffect)(()=>{s(sessionStorage.getItem(e))},[]),t}},108:function(e,t,s){"use strict";s.d(t,{o:function(){return l}});var n=s(4660),a=s(7173);let l=(0,n.Ue)(e=>({song:[],setSong:t=>{e((0,a.Uy)(e=>{e.song=t}))},listOfSongs:[],setListOfSongs:t=>{e((0,a.Uy)(e=>{e.listOfSongs=t}))},searchValue:"",setSearchValue:t=>{e((0,a.Uy)(e=>{e.searchValue=t}))},searchResults:[],setSearchResults:t=>{e((0,a.Uy)(e=>{e.searchResults=t}))},songDisplay:!1,setSongDisplay:t=>{e((0,a.Uy)(e=>{e.songDisplay=t}))}}))},8574:function(){}},function(e){e.O(0,[195,173,89,971,472,744],function(){return e(e.s=3381)}),_N_E=e.O()}]);